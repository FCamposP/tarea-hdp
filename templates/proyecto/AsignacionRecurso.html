{% extends 'base/base.html'%}
{% block Apartado%} <h4 style=" text-align: center;">Asignación de Recursos</h4>{% endblock %}
{%block links%}

{% block tagbody %} 
<body onUnLoad="resetearpaginaAsignacion()"> {% endblock %}

<div class="list-group">
    <a href="#" class="list-group-item list-group-item-action active">Lista de enlaces</a>
    <a href="{% url 'constructora:busquedaProyecto' %}" class="list-group-item list-group-item-action">Buscar Proyecto</a>
    <a href="{% url 'constructora:nuevoProyecto' %}"class="list-group-item list-group-item-action">Nuevo Proyecto</a>
</div>
{%endblock%}  

{% block contenido %}

        <div style="width: 50%; margin-left: 25%">
                <label for="">Elija un Proyecto</label><br>
                <select class="form-control"  name="selectProyecto" id="selectProyecto"  onchange="habilitarProyecto()">
                    <option></option>
                    {%for p in proyectos%}
                    <option value="{{p.id}}">{{p.nombreProyecto}}</option>
                    {%endfor%}
                </select>
             </div> <br>
<div class="row">
    <div class="col-md-4" class="cajasAñadir">

      <form method="POST">
            {%csrf_token%}
        <fieldset class="groupbox">
            <legend > Empleado</legend>
            <div style="width: 50%; ">
                    <label for="">Elija un Empleado</label><br>
                    <select disabled class="form-control" name="selectEmpleado" id="selectEmpleado" onchange="habilitarEmpleado()">
                        <option></option>
                        {%for e in empleados%}
                        <option value="{{e.id}}" >{{e.nombres}}  {{e.apellidos}}</option>
                        {%endfor%}
                    </select>
                 </div> <br>
                 <div style="width: 50%; ">
                        <label for="">Elija un Puesto</label><br>
                        <select disabled class="form-control" name="selectPuesto" id="selectPuesto" onchange="habilitarPuesto()">
                            <option></option>
                            {%for p in puestos%}
                            <option value="{{p.id}}">{{p.nombrePuesto}}</option>
                            {%endfor%}
                        </select>
                     </div> <br>
            <div class="btnAñadir">
                <a href=""  class="btn btn-secondary" id="btnEmpleado" >Asignar</a>            </div>
        </fieldset>
    </form>  
    </div>
    <div class="col-md-4">
        <fieldset class="groupbox">
            <legend > Bien Material</legend>
            <div style="width: 50%; ">
                    <label for="">Elija un Recurso</label><br>
                    <select disabled class="form-control" class="ElejirRecurso" name="selectRecurso" id="selectRecurso" onchange="habilitarRecurso()">
                        <option></option>
                        {%for r in recursos%}
                        
                        <option value="{{r.codigoRecurso}}">{{r.nombreRecurso}} </option>
                        {%endfor%}
                    </select>
                 </div> <br>
                 <div style="width: 70%;">
                        <label for="">Elija un Ejemplar</label><br>
                        <div >
                        <select  id="ejemplaresT" class="form-control"onchange="habilitarEjemplares()">
                      
                        <div id="ejemplaresT">
       
                        </div>
                        </select>
                     </div> 
                    </div><br> <!--fin de div para ajax-->
            <div class="btnAñadir">
                </div>
        </fieldset>
    </div> <br>
    <div class="col-md-4" >
   
            <fieldset class="groupbox" >
                <legend > Herramientas</legend>
                <div style="width: 50%; ">
                        <label for="">Elija Herramienta</label><br>
                        <select disabled class="form-control" name="selectHerramienta" id="selectHerra" onchange="HabilitarHerra()">
                            <option></option>
                            {%for h in herramientas%}
                            <option>{{h.nombreHerramienta}} </option>
                            {%endfor%}
                        </select>
                     </div> <br>
                     <div style="width: 50%; ">
                            <label for="">Cantidad</label><br>
                            <input disabled type="text" id="inputCantidad" name="cantidadHerramientas"  style="width: 100%">
                         </div> <br>
                <div class="btnAñadir">
                    <button disabled type="button" id="btnHerra" class="btn btn-secondary">Añadir</button>
                </div>
            </fieldset>
     
        </div>
</div>

<br>

<div id="pruuueba"></div>


<div id="RecursosAñadidos" style="display: ">
<hr><h4 id="recursoAñadido">Recursos añadidos</h4><hr>
<div class="recursosAsignar" >
    <table class="table">
        <thead class="thead-dark">
            <tr>
                <th scope="col" style="width:%">#</th>
                <th scope="col" style="width:%">Tipo Recurso</th>
                <th scope="col" style="width:%">Nombre</th>
                <th scope="col" style="width:%">Asignación</th>
                <th scope="col" style="width:%">Acción</th>
            </tr>
        </thead>
        <tbody>
        <div id="recursosEmpleados">
         
            <tr>
                <th scope="row"></th>
                <td id="aver">Empleado</td>
                <td></td>

                <td></td>
                <td> <a href=""  class="btn btn-warning">Eliminar</a></td>

            </tr>
        </div>
   
            {%for em in maquinariaAsignada%}


            {%endfor%}
            {%for em in herramientasAsignadas%}
            <tr>
                <th scope="row">{{forloop.counter }}</th>
                <td>Empleado</td>
                <td>{{em.empleado.nombres}} {{em.empleado.apellidos}}</td>

                <td>{{em.puesto.nombrePuesto}}</td>
                <td> <input class="btn btn-danger" type="button" data-toggle="modal" data-target="" value="Eliminar"></td>

            </tr>
            {%endfor%}

        </tbody>
    </table>
    <div class="btnAñadir">
        <button type="button" class="btn btn-success">Asignar Recursos</button>
    </div>
</div> <!--fin de recursos asignar-->
</div><!--fin de recursosasignados-->
{%endblock%} 
